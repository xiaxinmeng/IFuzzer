with optional_cm(transaction):
    ...